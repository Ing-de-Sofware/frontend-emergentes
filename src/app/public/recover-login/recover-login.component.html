<div class="recover-container">

  <div *ngIf="currentStep === 1" class="step-content">

    <h1 class="title">Forgot your password?</h1>
    <p class="subtitle">Enter your email and we'll send you a secure link to reset it.</p>

    <form #emailForm (submit)="onSendLink($event, emailForm)" class="form-card">
      <div class="form-group">
        <label for="email">Email</label>
        <div class="input-icon-wrapper">
          <input
            id="email"
            type="email"
            placeholder="Enter your registered email"
            name="email"
            required
            class="input-field">
          <i class="icon">✉️</i>
        </div>
      </div>

      <button type="submit" class="reset-button">
        Send reset link
      </button>

      <div *ngIf="stepError" class="validation-error">{{ stepError }}</div>

      <p class="info-text">You will receive an email with a secure link to create a new password.</p>

      <a routerLink="/login" class="resend-link">Didn't get the email? Resend</a>
    </form>
  </div>


  <div *ngIf="currentStep === 2" class="step-content">

    <h1 class="title">Set a new password</h1>
    <p class="subtitle">Create a strong password to secure your account.</p>

    <form #passwordForm (submit)="onSetNewPassword($event,passwordForm)" class="form-card">
      <div class="form-group">
        <label for="newPassword">New Password</label>
        <input
          id="newPassword"
          type="password"
          placeholder="Enter new password"
          name="newPassword"
          required
          minlength="8"
          class="input-field">
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <input
          id="confirmPassword"
          type="password"
          placeholder="Re-enter new password"
          name="confirmPassword"
          required
          class="input-field">
      </div>

      <p class="security-note">Use at least 8 characters, including letters and numbers, for better security.</p>

      <button type="submit" class="update-button" [disabled]="passwordUpdated">
        Update Password
      </button>

      <div *ngIf="passwordUpdated" class="success-message">
        Your password has been reset successfully. You can now log in.
      </div>
      <div *ngIf="stepError" class="validation-error">{{ stepError }}</div>
    </form>
  </div>
</div>
